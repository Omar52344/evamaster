(this.webpackJsonpeva=this.webpackJsonpeva||[]).push([[13],{117:function(e,t,a){"use strict";var n=a(5),s=a(11),c=a(1),r=a.n(c),l=a(17),o=a.n(l),i=a(102),u=a.n(i),m=a(103),d={tag:m.tagPropType,inverse:o.a.bool,color:o.a.string,body:o.a.bool,outline:o.a.bool,className:o.a.string,cssModule:o.a.object,innerRef:o.a.oneOfType([o.a.object,o.a.string,o.a.func])},f=function(e){var t=e.className,a=e.cssModule,c=e.color,l=e.body,o=e.inverse,i=e.outline,d=e.tag,f=e.innerRef,b=Object(s.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),p=Object(m.mapToCssModules)(u()(t,"card",!!o&&"text-white",!!l&&"card-body",!!c&&(i?"border":"bg")+"-"+c),a);return r.a.createElement(d,Object(n.a)({},b,{className:p,ref:f}))};f.propTypes=d,f.defaultProps={tag:"div"},t.a=f},119:function(e,t,a){"use strict";var n=a(5),s=a(11),c=a(1),r=a.n(c),l=a(17),o=a.n(l),i=a(102),u=a.n(i),m=a(103),d={tag:m.tagPropType,className:o.a.string,cssModule:o.a.object,innerRef:o.a.oneOfType([o.a.object,o.a.string,o.a.func])},f=function(e){var t=e.className,a=e.cssModule,c=e.innerRef,l=e.tag,o=Object(s.a)(e,["className","cssModule","innerRef","tag"]),i=Object(m.mapToCssModules)(u()(t,"card-body"),a);return r.a.createElement(l,Object(n.a)({},o,{className:i,ref:c}))};f.propTypes=d,f.defaultProps={tag:"div"},t.a=f},129:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1),s=a.n(n).a.createContext({})},137:function(e,t,a){"use strict";var n=a(5),s=a(11),c=a(111),r=a(12),l=a(1),o=a.n(l),i=a(17),u=a.n(i),m=a(102),d=a.n(m),f=a(103),b={children:u.a.node,type:u.a.string,size:u.a.string,bsSize:u.a.string,valid:u.a.bool,invalid:u.a.bool,tag:f.tagPropType,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),plaintext:u.a.bool,addon:u.a.bool,className:u.a.string,cssModule:u.a.object},p=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(c.a)(a)),a.focus=a.focus.bind(Object(c.a)(a)),a}Object(r.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.type,r=e.bsSize,l=e.valid,i=e.invalid,u=e.tag,m=e.addon,b=e.plaintext,p=e.innerRef,g=Object(s.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),v=["radio","checkbox"].indexOf(c)>-1,h=new RegExp("\\D","g"),E=u||("select"===c||"textarea"===c?c:"input"),N="form-control";b?(N+="-plaintext",E=u||"input"):"file"===c?N+="-file":"range"===c?N+="-range":v&&(N=m?null:"form-check-input"),g.size&&h.test(g.size)&&(Object(f.warnOnce)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),r=g.size,delete g.size);var j=Object(f.mapToCssModules)(d()(t,i&&"is-invalid",l&&"is-valid",!!r&&"form-control-"+r,N),a);return("input"===E||u&&"function"===typeof u)&&(g.type=c),g.children&&!b&&"select"!==c&&"string"===typeof E&&"select"!==E&&(Object(f.warnOnce)('Input with a type of "'+c+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete g.children),o.a.createElement(E,Object(n.a)({},g,{ref:p,className:j,"aria-invalid":i}))},t}(o.a.Component);p.propTypes=b,p.defaultProps={type:"text"},t.a=p},199:function(e,t,a){"use strict";var n=a(5),s=a(12),c=a(1),r=a.n(c),l=a(17),o=a.n(l),i=a(102),u=a.n(i),m=a(129),d=a(103),f={tag:d.tagPropType,activeTab:o.a.any,className:o.a.string,cssModule:o.a.object},b=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={activeTab:a.props.activeTab},a}return Object(s.a)(t,e),t.getDerivedStateFromProps=function(e,t){return t.activeTab!==e.activeTab?{activeTab:e.activeTab}:null},t.prototype.render=function(){var e=this.props,t=e.className,a=e.cssModule,s=e.tag,c=Object(d.omit)(this.props,Object.keys(f)),l=Object(d.mapToCssModules)(u()("tab-content",t),a);return r.a.createElement(m.a.Provider,{value:{activeTabId:this.state.activeTab}},r.a.createElement(s,Object(n.a)({},c,{className:l})))},t}(c.Component);t.a=b,b.propTypes=f,b.defaultProps={tag:"div"}},200:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(5),s=a(11),c=a(1),r=a.n(c),l=a(17),o=a.n(l),i=a(102),u=a.n(i),m=a(129),d=a(103),f={tag:d.tagPropType,className:o.a.string,cssModule:o.a.object,tabId:o.a.any};function b(e){var t=e.className,a=e.cssModule,c=e.tabId,l=e.tag,o=Object(s.a)(e,["className","cssModule","tabId","tag"]),i=function(e){return Object(d.mapToCssModules)(u()("tab-pane",t,{active:c===e}),a)};return r.a.createElement(m.a.Consumer,null,(function(e){var t=e.activeTabId;return r.a.createElement(l,Object(n.a)({},o,{className:i(t)}))}))}b.propTypes=f,b.defaultProps={tag:"div"}},224:function(e,t,a){"use strict";var n=a(5),s=a(11),c=a(1),r=a.n(c),l=a(17),o=a.n(l),i=a(102),u=a.n(i),m=a(103),d={tag:m.tagPropType,className:o.a.string,cssModule:o.a.object},f=function(e){var t=e.className,a=e.cssModule,c=e.tag,l=Object(s.a)(e,["className","cssModule","tag"]),o=Object(m.mapToCssModules)(u()(t,"card-header"),a);return r.a.createElement(c,Object(n.a)({},l,{className:o}))};f.propTypes=d,f.defaultProps={tag:"div"},t.a=f},284:function(e,t,a){"use strict";var n=a(106),s=a(1),c=a.n(s),r=a(734);t.a=function(e){var t=e.children,a=Object(s.useRef)(),l=Object(s.useState)(!1),o=Object(n.a)(l,2),i=o[0],u=o[1],m=function(e){if(i){var t=a.current;if(t.contains(e.target)||t===e.target)return;u(!1)}};return Object(s.useEffect)((function(){return["click","touchstart"].forEach((function(e){return document.addEventListener(e,m,!1)})),function(){["click","touchstart"].forEach((function(e){return document.removeEventListener(e,m,!1)}))}}),[i]),c.a.createElement("div",{ref:a,className:"app-menu ".concat(i?"shown":"")},t,c.a.createElement(r.a,{className:"app-menu-button d-inline-block d-xl-none",onClick:function(){return u(!i)}},c.a.createElement("i",{className:"simple-icon-options"})))}},825:function(e,t,a){"use strict";a.r(t);var n=a(106),s=a(1),c=a.n(s),r=a(723),l=a(26),o=a(138),i=a.n(o),u=a(315),m=a(108),d=a(2),f=a(224),b=a(539),p=a(540),g=a(199),v=a(200),h=a(81),E=a(102),N=a.n(E),j=a(105),C=a(284),O=a(27),x=a(6),y=Object(r.c)(Object(l.b)((function(e){var t=e.chatApp;return{contacts:t.contacts,allContacts:t.allContacts,conversations:t.conversations,loadingConversations:t.loadingConversations,loadingContacts:t.loadingContacts,currentUser:t.currentUser}}),{changeConversationAction:d.gb,createConversationAction:d.lb,searchContactAction:d.Db})((function(e){var t=e.intl,a=e.activeTab,r=e.toggleAppMenu,o=e.contacts,u=(e.allContacts,e.conversations),m=(e.loadingConversations,e.loadingContacts),d=e.currentUser,E=e.changeConversationAction,y=e.createConversationAction,w=e.searchContactAction,T=Object(l.c)(),M=Object(l.d)((function(e){return e.Dash})),z=Object(s.useState)(M.Central.user),k=Object(n.a)(z,2),P=k[0],A=k[1],I=Object(s.useState)(""),R=Object(n.a)(I,2),S=R[0],U=R[1],_=function(e){U(e),e.length>0?A(P.filter((function(t){return t.nombre.indexOf(e)>=0}))):A(M.Central.user)},D=t.messages;return c.a.createElement(C.a,null,c.a.createElement(f.a,{className:"pl-0 pr-0"},c.a.createElement(b.a,{tabs:!0,className:"card-header-tabs ml-0 mr-0"},c.a.createElement(p.a,{className:"w-50 text-center"},c.a.createElement(h.b,{to:"#",location:{},className:N()({active:"contacts","nav-link":!0}),onClick:function(){}},c.a.createElement(j.a,{id:"chat.contacts"}))))),c.a.createElement("div",{className:"pt-4 pr-4 pl-4 pb-0"},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"text",className:"form-control rounded",placeholder:D["menu.search"],value:S,onChange:function(e){return _(e.target.value)}}))),c.a.createElement(g.a,{activeTab:a,className:"chat-app-tab-content"},c.a.createElement(v.a,{tabId:"messages",className:"chat-app-tab-pane"},c.a.createElement(i.a,{options:{suppressScrollX:!0,wheelPropagation:!1}},c.a.createElement("div",{className:"pt-2 pr-4 pl-4 pb-2"},M.Central.user&&P.map((function(e,t){return c.a.createElement("div",{key:t,className:"d-flex flex-row mb-1 border-bottom pb-3 mb-3"},c.a.createElement(h.b,{className:"d-flex",to:"#",location:{},onClick:function(t){T(Object(O.d)(e.id_user))}},c.a.createElement("img",{alt:e.nombre,src:x.baseurl+"user/"+e.foto,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),c.a.createElement("div",{className:"d-flex flex-grow-1 min-width-zero"},c.a.createElement("div",{className:"pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},c.a.createElement("div",{className:"min-width-zero"},c.a.createElement("p",{className:" mb-0 truncate"},e.nombre),c.a.createElement("p",{className:"mb-1 text-muted text-small"}))))))}))))),c.a.createElement(v.a,{tabId:"contacts",className:"chat-app-tab-pane"},c.a.createElement(i.a,{options:{suppressScrollX:!0,wheelPropagation:!1}},c.a.createElement("div",{className:"pt-2 pr-4 pl-4 pb-2"},m&&o.filter((function(e){return e.id!==d.id})).map((function(e,t){return c.a.createElement("div",{key:t,className:"d-flex flex-row mb-3 border-bottom pb-3"},c.a.createElement(h.b,{className:"d-flex",to:"#",location:{},onClick:function(){return t=e.id,"messages"!==a&&(r("messages"),w("")),u.find((function(e){return e.users.includes(d.id)&&e.users.includes(t)}))||y(d.id,t,u),void E(t);var t}},c.a.createElement("img",{alt:e.name,src:e.thumb,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),c.a.createElement("div",{className:"d-flex flex-grow-1 min-width-zero"},c.a.createElement("div",{className:"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},c.a.createElement("div",{className:"min-width-zero"},c.a.createElement("p",{className:"mb-0 truncate"},e.name))))))})))))))}))),w=c.a.memo((function(e){var t=e.name,a=e.thumb,n=e.lastSeenDate;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"d-flex flex-row chat-heading"},c.a.createElement("div",{className:"d-flex"},c.a.createElement("img",{alt:t,src:a,className:"img-thumbnail border-0 rounded-circle ml-0 mr-4 list-thumbnail align-self-center small"})),c.a.createElement("div",{className:" d-flex min-width-zero"},c.a.createElement("div",{className:"card-body pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},c.a.createElement("div",{className:"min-width-zero"},c.a.createElement("div",null,c.a.createElement("p",{className:"list-item-heading mb-1 truncate "},t)),c.a.createElement("p",{className:"mb-0 text-muted text-small"},"0"===n?"-":n))))),c.a.createElement("div",{className:"separator mb-5"}))})),T=a(117),M=a(119),z=c.a.memo((function(e){var t=e.sender,a=e.item,n=e.currentUserid;return c.a.createElement(c.a.Fragment,null,c.a.createElement(T.a,{className:"d-inline-block mb-3 float-".concat(a.destino!==n.id_user?"left":"right")},c.a.createElement("div",{className:"position-absolute  pt-1 pr-2 r-0"},c.a.createElement("span",{className:"text-extra-small text-muted"},"0"==a.leido?"no leido":a.stampdefault)),c.a.createElement(M.a,null,c.a.createElement("div",{className:"d-flex flex-row pb-1"},c.a.createElement("img",{alt:a.destino!==n.id_user?t.nombre:n.nombre,src:a.destino!==n.id_user?x.baseurl+"user/"+t.foto:x.baseurl+"user/"+n.foto,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),c.a.createElement("div",{className:" d-flex flex-grow-1 min-width-zero"},c.a.createElement("div",{className:"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},c.a.createElement("div",{className:"min-width-zero"},c.a.createElement("p",{className:"mb-0 truncate list-item-heading"},a.destino!==n.id_user?t.nombre:n.nombre))))),c.a.createElement("div",{className:"chat-text-left"},c.a.createElement("p",{className:"mb-0 text-semi-muted"},a.mensaje)))),c.a.createElement("div",{className:"clearfix"}))})),k=a(137),P=a(263),A=c.a.memo((function(e){var t=e.placeholder,a=e.messageInput,n=e.handleChatInputPress,s=e.handleChatInputChange,r=e.handleSendButtonClick;return c.a.createElement("div",{className:"chat-input-container d-flex justify-content-between align-items-center"},c.a.createElement(k.a,{className:"form-control flex-grow-1",type:"text",placeholder:t,value:a,onKeyPress:function(e){return n(e)},onChange:function(e){return s(e)}}),c.a.createElement("div",null,c.a.createElement(P.a,{color:"primary",className:"icon-button large ml-1",onClick:function(){return r()}},c.a.createElement("i",{className:"simple-icon-arrow-right"}))))}));t.default=Object(r.c)(Object(l.b)((function(e){var t=e.chatApp;return{allContacts:t.allContacts,conversations:t.conversations,loadingConversations:t.loadingConversations,loadingContacts:t.loadingContacts,currentUser:t.currentUser,selectedUser:t.selectedUser,selectedUserId:t.selectedUserId}}),{getContactsAction:d.ob,getConversationsAction:d.pb,changeConversationAction:d.gb,addMessageToConversationAction:d.db})((function(e){var t=e.intl,a=(e.allContacts,e.conversations),r=e.loadingConversations,o=e.loadingContacts,d=e.currentUser,f=e.selectedUser,b=e.selectedUserId,p=e.getContactsAction,g=e.getConversationsAction,v=e.changeConversationAction,h=(e.addMessageToConversationAction,Object(l.c)()),E=Object(l.d)((function(e){return e.Dash})),N=Object(s.useState)("messages"),j=Object(n.a)(N,2),C=j[0],T=j[1],M=Object(s.useState)(""),k=Object(n.a)(M,2),P=k[0],I=k[1],R=Object(s.useRef)(null);Object(s.useEffect)((function(){document.body.classList.add("no-footer");return p(),g(0),function(){document.body.classList.remove("no-footer")}}),[p,g]);var S=function(){setTimeout((function(){R.current._ps.element.scrollTop=R.current._ps.contentHeight}),1e3)};Object(s.useEffect)((function(){r&&o&&null==f&&(v(b),S())}),[v,o,r,f,b]),Object(s.useEffect)((function(){S()}),[]),Object(s.useEffect)((function(){S()}),[E.ChatObjetivo[0]]);var U=t.messages;r&&o&&f&&a.find((function(e){return e.users.includes(d.id)&&e.users.includes(f.id)}));return Object(s.useEffect)((function(){setTimeout((function(){h(Object(O.b)(E.user.user[0].id_user,E.ChatObjetivo[0].id_user))}),1e3)})),c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{className:"app-row"},c.a.createElement(m.a,{xxs:"12",className:"chat-app"},c.a.createElement(w,{name:E.ChatObjetivo[0].nombre,thumb:x.baseurl+"user/"+E.ChatObjetivo[0].foto,lastSeenDate:null}),E.Chat&&c.a.createElement(i.a,{ref:R},E.Chat.map((function(e,t){return c.a.createElement(z,{key:t,sender:E.ChatObjetivo[0],item:e,currentUserid:E.user.user[0]})}))))),E.Chat&&c.a.createElement(c.a.Fragment,null,c.a.createElement(A,{placeholder:U["chat.saysomething"],messageInput:P,handleChatInputPress:function(e){"Enter"===e.key&&P.length>0&&(h(Object(O.c)(E.user.user[0].id_user,E.ChatObjetivo[0].id_user,P)),I(""),T("messages"),S(),S())},handleChatInputChange:function(e){I(e.target.value)},handleSendButtonClick:function(){h(Object(O.c)(E.user.user[0].id_user,E.ChatObjetivo[0].id_user,P)),I(""),T("messages"),S()}}),c.a.createElement(y,{activeTab:C,toggleAppMenu:T})))})))}}]);
//# sourceMappingURL=application-caht.fa98e08c.chunk.js.map